import{_ as B}from"./DC-Wy9T5.js";import{d as C,F as M,u as R,J as T,K as V,L as A,Q as N,R as S,r as $,t as D,i as F,v as H,x as I,y as t,A as i,B as u,S as d,T as m,G as o,C as L}from"./DPxB2w_0.js";import{u as Q}from"./Dn_8v55Y.js";import{u as j}from"./mcPM8BNF.js";import{u as E,a as G}from"./DEefp4d8.js";import{u as J,s as b}from"./Dg45MdiV.js";import"./B8H6CRKA.js";import"./CcbZIe53.js";const K={class:"settings-main card"},P={class:"settings-main-content"},q=t("span",{class:"input-info error"},"请输入昵称",-1),z=t("span",{class:"input-info error"},"请输入邮箱",-1),O=t("span",{class:"input-info error"},"请输入密码",-1),W={class:"settings-footer"},re=C({name:"BackendUserModify",__name:"modify",async setup(X){let c,p;const h=M(),k=R(),f=Q("id"),l=j();[c,p]=T(()=>E("backend-user-modify",()=>l.getUserItem({id:f.value,path:h.fullPath,from:"backend"}))),await c,p();const w=V(l),g=A(w,"item"),[v,_]=J(!1),e=N({id:f.value,username:"",email:"",password:""});S(g.value,a=>{a.data&&(e.username=a.data.username,e.email=a.data.email)},{immediate:!0,deep:!0});async function x(){if(!e.username||!e.email){b("请将表单填写完整!");return}if(v.value)return;_(!0);const{code:a,data:s,message:n}=await G().$post("/api/backend/user/modify",{},{body:e});_(!1),a===200&&(b({type:"success",content:n}),l.updateUserItem(s),k.push("/_backend/user/list"))}const y=$("用户编辑 - M.M.F 小屋");return D({title:y,meta:[{name:"description",content:y}]}),(a,s)=>{const n=B,U=F("router-link");return H(),I("div",K,[t("div",P,[t("form",null,[i(n,{title:"昵称"},{default:u(()=>[d(t("input",{"onUpdate:modelValue":s[0]||(s[0]=r=>o(e).username=r),type:"text",placeholder:"昵称",class:"base-input",name:"username"},null,512),[[m,o(e).username]]),q]),_:1}),i(n,{title:"邮箱"},{default:u(()=>[d(t("input",{"onUpdate:modelValue":s[1]||(s[1]=r=>o(e).email=r),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[m,o(e).email]]),z]),_:1}),i(n,{title:"密码"},{default:u(()=>[d(t("input",{"onUpdate:modelValue":s[2]||(s[2]=r=>o(e).password=r),type:"password",placeholder:"密码",class:"base-input",name:"password"},null,512),[[m,o(e).password]]),O]),_:1})])]),t("div",W,[t("a",{href:"javascript:;",class:"btn btn-yellow",onClick:x},"编辑用户"),i(U,{to:"/_backend/user/list",class:"btn btn-blue"},{default:u(()=>[L("返回")]),_:1})])])}}});export{re as default};
