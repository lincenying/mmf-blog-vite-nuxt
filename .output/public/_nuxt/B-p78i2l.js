import{d as x,F as w,J as N,K as $,L as B,r as L,t as M,i as S,v as t,x as a,y as c,M as T,N as V,O as j,z as l,G as f,A,B as D,C as R,I as F,P}from"./DPxB2w_0.js";import{u as z}from"./mcPM8BNF.js";import{u as H,a as h}from"./DEefp4d8.js";import{u as E}from"./CiqCsSE6.js";import{u as G,s as g}from"./Dg45MdiV.js";import{U as I}from"./_kJ-WLyv.js";import"./B8H6CRKA.js";import"./CcbZIe53.js";const J={class:"settings-main card"},K={class:"settings-main-content"},O=P('<div class="list-section list-header"><div class="list-username">用户名</div><div class="list-email">邮箱</div><div class="list-date">时间</div><div class="list-action">操作</div></div>',1),q={class:"list-email"},Q={class:"list-date"},W={class:"list-action"},X=["onClick"],Y=["onClick"],Z={key:0,class:"settings-footer"},ee={key:1,class:"admin-load-more",href:"javascript:;"},de=x({name:"BackendUserList",__name:"list",async setup(se){let d,u;const _=w(),i=z();[d,u]=N(()=>H("backend-user-list",()=>i.getUserList({page:1,path:_.fullPath}))),await d,u();const k=$(i),r=B(k,"lists");E("backend-user-list");const[m,p]=G(!1);async function y(s=r.value.page){m.value||(p(!0),await i.getUserList({page:s,path:_.fullPath}),p(!1))}async function C(s){const{code:o,message:n}=await h().$get("/api/backend/user/recover",{id:s});o===200&&(g({type:"success",content:n}),i.recoverUser(s))}async function U(s){const{code:o,message:n}=await h().$get("/api/backend/user/delete",{id:s});o===200&&(g({type:"success",content:n}),i.deleteUser(s))}const v=L("用户列表 - M.M.F 小屋");return M({title:v,meta:[{name:"description",content:v}]}),(s,o)=>{const n=S("router-link");return t(),a("div",J,[c("div",K,[O,(t(!0),a(T,null,V(r.value.data,e=>(t(),a("div",{key:e._id,class:"list-section"},[c("div",{class:j(["list-username",e.is_delete?"text-red-500 line-through":""])},l(e.username),3),c("div",q,l(e.email),1),c("div",Q,l(f(I)(e.update_date)),1),c("div",W,[A(n,{to:`/_backend/user/modify?id=${e._id}`,class:"badge badge-success"},{default:D(()=>[R("编辑")]),_:2},1032,["to"]),e.is_delete?(t(),a("a",{key:0,href:"javascript:;",onClick:b=>C(e._id)},"恢复",8,X)):(t(),a("a",{key:1,href:"javascript:;",onClick:b=>U(e._id)},"删除",8,Y))])]))),128))]),r.value.hasNext?(t(),a("div",Z,[f(m)?(t(),a("a",ee,"加载中...")):(t(),a("a",{key:0,class:"admin-load-more",href:"javascript:;",onClick:o[0]||(o[0]=e=>y())},"加载更多"))])):F("",!0)])}}});export{de as default};
