import{d as x,F as w,J as N,K as $,L as B,r as L,t as M,i as S,v as t,x as a,y as c,M as T,N as V,O as j,z as l,G as f,A as D,B as R,C as F,I as P,P as z}from"./DPxB2w_0.js";import{u as H}from"./BwmWTaDw.js";import{u as U,a as h}from"./DEefp4d8.js";import{u as E}from"./CiqCsSE6.js";import{u as G,s as g}from"./Dg45MdiV.js";import{U as I}from"./_kJ-WLyv.js";import"./B8H6CRKA.js";import"./CcbZIe53.js";const J={class:"card settings-main"},K={class:"settings-main-content"},O=z('<div class="list-section list-header"><div class="list-username">用户名</div><div class="list-email">邮箱</div><div class="list-date">时间</div><div class="list-action">操作</div></div>',1),q={class:"list-email"},Q={class:"list-date"},W={class:"list-action"},X=["onClick"],Y=["onClick"],Z={key:0,class:"settings-footer"},ee={key:1,class:"admin-load-more",href:"javascript:;"},re=x({name:"BackendAdminList",__name:"list",async setup(se){let r,m;const u=w(),o=H();[r,m]=N(()=>U("backend-admin-list",()=>o.getAdminList({page:1,path:u.fullPath}))),await r,m();const k=$(o),d=B(k,"lists");E("backend-admin-list");const[_,p]=G(!1);async function y(s=d.value.page){_.value||(p(!0),await o.getAdminList({page:s,path:u.fullPath}),p(!1))}async function C(s){const{code:i,message:n}=await h().$get("/api/backend/admin/recover",{id:s});i===200&&(g({type:"success",content:n}),o.recoverAdmin(s))}async function A(s){const{code:i,message:n}=await h().$get("/api/backend/admin/delete",{id:s});i===200&&(g({type:"success",content:n}),o.deleteAdmin(s))}const v=L("管理员列表 - M.M.F 小屋");return M({title:v,meta:[{name:"description",content:v}]}),(s,i)=>{const n=S("router-link");return t(),a("div",J,[c("div",K,[O,(t(!0),a(T,null,V(d.value.data,e=>(t(),a("div",{key:e._id,class:"list-section"},[c("div",{class:j(["list-username",e.is_delete?"text-red-500 line-through":""])},l(e.username),3),c("div",q,l(e.email),1),c("div",Q,l(f(I)(e.update_date)),1),c("div",W,[D(n,{to:`/_backend/admin/modify?id=${e._id}`,class:"badge badge-success"},{default:R(()=>[F("编辑")]),_:2},1032,["to"]),e.is_delete?(t(),a("a",{key:0,href:"javascript:;",onClick:b=>C(e._id)},"恢复",8,X)):(t(),a("a",{key:1,href:"javascript:;",onClick:b=>A(e._id)},"删除",8,Y))])]))),128))]),d.value.hasNext?(t(),a("div",Z,[f(_)?(t(),a("a",ee,"加载中...")):(t(),a("a",{key:0,class:"admin-load-more",href:"javascript:;",onClick:i[0]||(i[0]=e=>y())},"加载更多"))])):P("",!0)])}}});export{re as default};
