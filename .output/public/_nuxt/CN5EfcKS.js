import{a as c}from"./DEefp4d8.js";import{U as x,Q as A,V as g}from"./DPxB2w_0.js";const v=x("backendArticleStore",()=>{const t=A({lists:{data:[],path:"",hasNext:0,hasPrev:0,page:1},item:{data:null,path:""}}),l=async a=>{if(t.lists.data.length>0&&a.path===t.lists.path&&a.page===1)return;const{code:e,data:s}=await c().$get("/api/backend/article/list",{...a,path:void 0,cache:!0});if(e===200&&s){const{list:i=[],path:m,hasNext:f=0,hasPrev:u=0,page:d}={...s,path:a.path,page:a.page};t.lists={data:d===1?i:t.lists.data.concat(i),hasNext:f,hasPrev:u,page:(d||1)+1,path:m}}},n=async a=>{const{code:e,data:s}=await c().$get("/api/backend/article/item",{...a,path:void 0});e===200&&s&&(t.item={data:s,...a})},r=async a=>{const e=t.lists.data.findIndex(s=>s._id===a);e>-1&&t.lists.data.splice(e,1,{...t.lists.data[e],is_delete:1})},o=async a=>{const e=t.lists.data.findIndex(s=>s._id===a);e>-1&&t.lists.data.splice(e,1,{...t.lists.data[e],is_delete:0})},p=a=>{t.lists.path&&(t.lists.data=[a].concat(t.lists.data))},h=a=>{const e=t.lists.data.findIndex(s=>s._id===a._id);e>-1&&t.lists.data.splice(e,1,a)};return{...g(t),getArticleList:l,getArticleItem:n,deleteArticle:r,recoverArticle:o,insertArticleItem:p,updateArticleItem:h}}),k=v;export{k as u};
