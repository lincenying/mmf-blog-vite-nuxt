import{d as B,F as N,J as L,K as D,L as M,r as S,t as V,i as j,v as t,x as a,y as n,M as R,N as T,O as F,z as r,G as m,A as H,B as g,C as h,H as P,I as k,P as z}from"./DPxB2w_0.js";import{u as E}from"./CN5EfcKS.js";import{u as G,a as y}from"./DEefp4d8.js";import{u as I}from"./CiqCsSE6.js";import{u as J,s as C}from"./Dg45MdiV.js";import{g as K}from"./_kJ-WLyv.js";import"./B8H6CRKA.js";import"./CcbZIe53.js";const O={class:"settings-main card"},q={class:"settings-main-content"},Q=z('<div class="list-section list-header"><div class="list-title">标题</div><div class="list-category">分类</div><div class="list-date">最后更新</div><div class="list-action">操作</div></div>',1),U={class:"list-category"},W={class:"list-date"},X={class:"list-action"},Y=["onClick"],Z=["onClick"],ee={key:0,class:"settings-footer","flex-cc":"","gap-30px":""},te={key:1,class:"admin-load-more",href:"javascript:;"},_e=B({name:"BackendArticleList",__name:"list",async setup(se){let d,_;const u=N(),i=E();[d,_]=L(()=>G("backend-article-list",()=>i.getArticleList({page:1,path:u.fullPath}))),await d,_();const b=D(i),l=M(b,"lists");I("backend-article-list");const[p,f]=J(!1);async function A(s=l.value.page){p.value||(f(!0),await i.getArticleList({page:s,path:u.fullPath}),f(!1))}async function x(s){const{code:o,message:c}=await y().$get("/api/backend/article/recover",{id:s});o===200&&(C({type:"success",content:c}),i.recoverArticle(s))}async function $(s){const{code:o,message:c}=await y().$get("/api/backend/article/delete",{id:s});o===200&&(C({type:"success",content:c}),i.deleteArticle(s))}const v=S("文章列表 - M.M.F 小屋");return V({title:v,meta:[{name:"description",content:v}]}),(s,o)=>{const c=j("router-link");return t(),a("div",O,[n("div",q,[Q,(t(!0),a(R,null,T(l.value.data,e=>(t(),a("div",{key:e._id,class:"list-section"},[n("div",{class:F(["list-title",e.is_delete?"text-red-500 line-through":""])},r(e.title),3),n("div",U,r(e.category_name),1),n("div",W,r(m(K)(e.update_date)),1),n("div",X,[H(c,{to:`/_backend/article/modify?id=${e._id}`,class:"badge badge-success"},{default:g(()=>[h("编辑")]),_:2},1032,["to"]),e.is_delete?(t(),a("a",{key:0,href:"javascript:;",onClick:w=>x(e._id)},"恢复",8,Y)):(t(),a("a",{key:1,href:"javascript:;",onClick:w=>$(e._id)},"删除",8,Z)),e.comment_count>0?(t(),P(c,{key:2,to:`/_backend/article/comment/${e._id}`,class:"badge badge-success"},{default:g(()=>[h(" 评论 ")]),_:2},1032,["to"])):k("",!0)])]))),128))]),l.value.hasNext?(t(),a("div",ee,[m(p)?(t(),a("a",te,"加载中...")):(t(),a("a",{key:0,class:"admin-load-more",href:"javascript:;",onClick:o[0]||(o[0]=e=>A())},"加载更多"))])):k("",!0)])}}});export{_e as default};
