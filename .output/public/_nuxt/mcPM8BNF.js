import{a as n}from"./DEefp4d8.js";import{U as x,Q as f,V as U}from"./DPxB2w_0.js";const g=x("backendUserStore",()=>{const e=f({lists:{hasNext:0,hasPrev:0,path:"",page:1,data:[]},item:{data:null,path:""}}),r=async t=>{if(e.lists.data.length>0&&t.path===e.lists.path&&t.page===1)return;const{code:s,data:a}=await n().$get("/api/backend/user/list",{...t,path:void 0,cache:!0});if(s===200&&a){const{list:i=[],path:h,hasNext:u=0,hasPrev:m=0,page:d}={...a,path:t.path,page:t.page};e.lists={data:d===1?i:e.lists.data.concat(i),hasNext:u,hasPrev:m,page:(d||1)+1,path:h}}},c=async t=>{const{code:s,data:a}=await n().$get("/api/backend/user/item",{...t,path:void 0});s===200&&a&&(e.item={data:a,...t})},o=t=>{e.item.data=t;const s=e.lists.data.findIndex(a=>a._id===t._id);s>-1&&e.lists.data.splice(s,1,t)},p=t=>{const s=e.lists.data.findIndex(a=>a._id===t);s>-1&&e.lists.data.splice(s,1,{...e.lists.data[s],is_delete:1})},l=t=>{const s=e.lists.data.findIndex(a=>a._id===t);s>-1&&e.lists.data.splice(s,1,{...e.lists.data[s],is_delete:0})};return{...U(e),getUserList:r,getUserItem:c,updateUserItem:o,deleteUser:p,recoverUser:l}}),I=g;export{I as u};
